{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import api from'../api/client';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ShoppingList=()=>{const{user,isAuthenticated}=useAuth();const navigate=useNavigate();const[items,setItems]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{if(!isAuthenticated){navigate('/login');return;}fetchShoppingList();},[isAuthenticated,navigate]);const fetchShoppingList=async()=>{if(!user)return;try{setLoading(true);const data=await api.getShoppingList(user.id);setItems(data);}catch(err){console.error('장보기 목록 조회 에러:',err);setError('장보기 목록을 불러오는데 실패했습니다.');}finally{setLoading(false);}};const handleRemoveItem=async itemId=>{if(!user)return;try{// API 호출로 아이템 삭제\nawait fetch(\"/api/users/\".concat(user.id,\"/shopping-list/\").concat(itemId),{method:'DELETE'});// 성공적으로 삭제되면 목록에서 제거\nsetItems(items.filter(item=>item.id!==itemId));}catch(err){console.error('아이템 삭제 에러:',err);alert('아이템 삭제에 실패했습니다.');}};const calculateTotal=()=>{return items.reduce((total,item)=>{if(item.ingredient.price){return total+item.ingredient.price*item.quantity;}return total;},0);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl\",children:\"\\uB85C\\uB529 \\uC911...\"})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-xl text-red-600\",children:error})});}return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 py-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:\"\\uC7A5\\uBCF4\\uAE30 \\uBAA9\\uB85D\"}),items.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-center py-8\",children:\"\\uC7A5\\uBCF4\\uAE30 \\uBAA9\\uB85D\\uC774 \\uBE44\\uC5B4\\uC788\\uC2B5\\uB2C8\\uB2E4.\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4 mb-8\",children:items.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center bg-gray-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium\",children:item.ingredient.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[item.quantity,\" \",item.unit]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[item.ingredient.price&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-600 font-medium\",children:[\"\\u20A9\",(item.ingredient.price*item.quantity).toLocaleString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRemoveItem(item.id),className:\"text-red-500 hover:text-red-700\",children:\"\\uC0AD\\uC81C\"})]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-lg font-medium\",children:\"\\uCD1D \\uC608\\uC0C1 \\uAE08\\uC561:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-bold text-green-600\",children:[\"\\u20A9\",calculateTotal().toLocaleString()]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"* \\uC77C\\uBD80 \\uC7AC\\uB8CC\\uC758 \\uAC00\\uACA9 \\uC815\\uBCF4\\uAC00 \\uC5C6\\uC744 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4.\"})]})]})]})});};export default ShoppingList;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useAuth","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ShoppingList","user","isAuthenticated","navigate","items","setItems","loading","setLoading","error","setError","fetchShoppingList","data","getShoppingList","id","err","console","handleRemoveItem","itemId","fetch","concat","method","filter","item","alert","calculateTotal","reduce","total","ingredient","price","quantity","className","children","length","map","name","unit","toLocaleString","onClick"],"sources":["/Users/daeyeop/Desktop/I-eung/frontend/src/pages/ShoppingList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport api from '../api/client';\n\ninterface ShoppingListItem {\n  id: number;\n  ingredient: {\n    id: number;\n    name: string;\n    price: number | null;\n  };\n  quantity: number;\n  unit: string;\n}\n\nconst ShoppingList: React.FC = () => {\n  const { user, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [items, setItems] = useState<ShoppingListItem[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n      return;\n    }\n\n    fetchShoppingList();\n  }, [isAuthenticated, navigate]);\n\n  const fetchShoppingList = async () => {\n    if (!user) return;\n\n    try {\n      setLoading(true);\n      const data = await api.getShoppingList(user.id);\n      setItems(data);\n    } catch (err) {\n      console.error('장보기 목록 조회 에러:', err);\n      setError('장보기 목록을 불러오는데 실패했습니다.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleRemoveItem = async (itemId: number) => {\n    if (!user) return;\n\n    try {\n      // API 호출로 아이템 삭제\n      await fetch(`/api/users/${user.id}/shopping-list/${itemId}`, {\n        method: 'DELETE',\n      });\n\n      // 성공적으로 삭제되면 목록에서 제거\n      setItems(items.filter(item => item.id !== itemId));\n    } catch (err) {\n      console.error('아이템 삭제 에러:', err);\n      alert('아이템 삭제에 실패했습니다.');\n    }\n  };\n\n  const calculateTotal = () => {\n    return items.reduce((total, item) => {\n      if (item.ingredient.price) {\n        return total + (item.ingredient.price * item.quantity);\n      }\n      return total;\n    }, 0);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"text-xl\">로딩 중...</div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"flex justify-center items-center min-h-screen\">\n        <div className=\"text-xl text-red-600\">{error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto px-4 py-8\">\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h1 className=\"text-2xl font-bold mb-6\">장보기 목록</h1>\n\n        {items.length === 0 ? (\n          <p className=\"text-gray-500 text-center py-8\">\n            장보기 목록이 비어있습니다.\n          </p>\n        ) : (\n          <>\n            <div className=\"space-y-4 mb-8\">\n              {items.map((item) => (\n                <div\n                  key={item.id}\n                  className=\"flex justify-between items-center bg-gray-50 p-4 rounded\"\n                >\n                  <div>\n                    <h3 className=\"font-medium\">{item.ingredient.name}</h3>\n                    <p className=\"text-sm text-gray-600\">\n                      {item.quantity} {item.unit}\n                    </p>\n                  </div>\n                  <div className=\"flex items-center gap-4\">\n                    {item.ingredient.price && (\n                      <span className=\"text-green-600 font-medium\">\n                        ₩{(item.ingredient.price * item.quantity).toLocaleString()}\n                      </span>\n                    )}\n                    <button\n                      onClick={() => handleRemoveItem(item.id)}\n                      className=\"text-red-500 hover:text-red-700\"\n                    >\n                      삭제\n                    </button>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <div className=\"border-t pt-4\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-lg font-medium\">총 예상 금액:</span>\n                <span className=\"text-xl font-bold text-green-600\">\n                  ₩{calculateTotal().toLocaleString()}\n                </span>\n              </div>\n              <p className=\"text-sm text-gray-500 mt-2\">\n                * 일부 재료의 가격 정보가 없을 수 있습니다.\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ShoppingList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}